<!DOCTYPE html>
<html>
    <head>
        <title>Play</title>
        <link rel="stylesheet" href="http://localhost/cplayer/src/css/cplayer.css">
		
    </head>
    <body>
<a href="video.html">video</a>
<div> <button onclick="loadXMLDoc()">Update List</button></div>
<h4>Playlist</h4>  
<div id="playlist">     
</div>
<div style="height: 100px"></div>
<script type="text/javascript" src="http://localhost/cplayer/src/audio/play.js"></script>	

<script>
 playlist = [];
function renderList(){
	var html = '';
	
	Object.keys(playlist).forEach(function (item) {
	
		html += '<div><img src="'+ playlist[item].list[0].img +'" width="80px"><h4>' + playlist[item].album + '</h4></div>';
		Object.keys(playlist[item].list).forEach(function (listNum) {
		var list = playlist[item].list[listNum];
		console.log( list );
			html += '<p><a href="javascript:" onclick="playNow( playlist['+ item +'].list['+listNum+'] )">'+ list.title+'</a></p>';
		});
	});
	document.getElementById('playlist').innerHTML = html;
}

function loadXMLDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      // document.getElementById("demo").innerHTML =  this.responseText;
	  playlist = JSON.parse(this.responseText);
	  renderList();
    }
  };
  xhttp.open("GET", "http://192.168.11.170/cplayer/", true);
  xhttp.send();
}

loadXMLDoc();


</script>
 
    </body>
</html>